<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>–ß–∞—Ç-–±–æ—Ç –≤ –ø–æ–º–æ—â—å</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>

<body>

<header class="topbar">
  <div class="brand">ü§ç –¢–∏—Ö–∞—è –ø–æ–º–æ—â—å</div>
  <button class="mode-btn" onclick="toggleMode()">üåô</button>
</header>

<section class="hero">
  <h1>–¢—ã –Ω–µ –æ–±—è–∑–∞–Ω —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –æ–¥–∏–Ω</h1>
  <p>–°–ø–æ–∫–æ–π–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä. –ê–Ω–æ–Ω–∏–º–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞.</p>
  <button onclick="scrollToChat()">–ù–∞—á–∞—Ç—å —á–∞—Ç</button>
</section>

<section class="tips">
  <h2>–ú–∏–Ω–∏-—Å–æ–≤–µ—Ç—ã</h2>
  <div class="tip-grid">
    <div class="tip-card">ü´Å –°–¥–µ–ª–∞–π 5 –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –≤—ã–¥–æ—Ö–æ–≤</div>
    <div class="tip-card">üö∂ –ü—Ä–æ–≥—É–ª—è–π—Å—è 5 –º–∏–Ω—É—Ç</div>
    <div class="tip-card">üìù –ó–∞–ø–∏—à–∏ —Ç—Ä–µ–≤–æ–∂–Ω—É—é –º—ã—Å–ª—å</div>
  </div>
</section>

<section class="help">
  <h2>–ñ–∏–≤–∞—è –ø–æ–º–æ—â—å</h2>
  <p>–ê—Å—Ç–∞–Ω–∞: +7 (7172) 55-55-55</p>
  <p>–ê–ª–º–∞—Ç—ã: +7 (727) 111-22-33</p>
</section>

<section id="chat-section" class="chat-section">
  <h2>–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h2>

  <div id="chatBox" class="chat"></div>

  <div class="typing" id="typing">–ë–æ—Ç –ø–µ—á–∞—Ç–∞–µ—Ç...</div>

  <div class="inputArea">
    <input id="message"
           placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç..."
           onkeydown="if(event.key==='Enter'){sendMessage();}">
    <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
</section>

<script>
const socket = io();
const chat = document.getElementById("chatBox");
const typing = document.getElementById("typing");

function scrollToChat(){
  document.getElementById("chat-section")
  .scrollIntoView({behavior:'smooth'});
}

function addMsg(text, cls){
  const div=document.createElement("div");
  div.className="msg "+cls;
  div.innerText=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
  const input=document.getElementById("message");
  const msg=input.value.trim();
  if(!msg) return;

  addMsg(msg,"user");
  input.value="";
  typing.style.display="block";
  socket.emit("message",{msg:msg});
}

socket.on("response",function(data){
  typing.style.display="none";
  addMsg(data.msg,"bot");
});

function toggleMode(){
  document.body.classList.toggle("dark");
}
</script>

</body>
</html>
